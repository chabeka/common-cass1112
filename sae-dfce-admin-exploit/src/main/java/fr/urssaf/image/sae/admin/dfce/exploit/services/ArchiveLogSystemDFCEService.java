package fr.urssaf.image.sae.admin.dfce.exploit.services;

import fr.urssaf.image.sae.admin.dfce.exploit.exception.ArchiveLogsRunningEx;
import fr.urssaf.image.sae.admin.dfce.exploit.exception.ConnectionServiceEx;
import fr.urssaf.image.sae.admin.dfce.exploit.exception.PurgeSystemEventsException;
import fr.urssaf.image.sae.admin.dfce.exploit.model.ConnectionParameter;

/**
 * Fournit l'interface des services :
 * <ul>
 * <li>Service de création du journal d'événement de type <b>System</b></li>
 * <li>Service de purge des journaux de type <b>System</b></li>
 * <li>Service de consultation du fichier d'archivage de type <b>System</b></li>
 * </ul>
 * 
 * 
 */
public interface ArchiveLogSystemDFCEService {

   /**
    * Crée le journal des événements de type <b>Système</b>.
    * <p>
    * Le journal produit comprendra les évènements dont la date 
    * est postérieure à la dernière journalisation, jusqu'à une date T.
    * T étant définie à l'aide du paramètre <code>days</code>.
    * </p>
    * 
    * @param cnxParameter paramètres de connexion à DFCE.
    * @param days nombre de jours à retrancher à la date actuelle.
    * @throws ConnectionServiceEx si la connexion échoue.
    * @throws ArchiveLogsRunningEx si le job de journalisation est déjà lancé.
    */
   void createSystemEventLogs(ConnectionParameter cnxParameter, int days)
         throws ConnectionServiceEx, ArchiveLogsRunningEx;

   /**
    * Purge les évènements de type <b>Système</b>.
    * 
    * <p>
    * Purge les évènements dont la date est postérieure 
    * à la dernière purge, jusqu'à une date T.
    * T étant définie à l'aide du paramètre <code>days</code>.
    * </p>
    * 
    * @param cnxParameter paramètres de connexion à DFCE.
    * @param days nombre de jours à retrancher à la date actuelle.
    * @throws ConnectionServiceEx si la connexion échoue.
    * @throws PurgeSystemEventsException si la purge échoue.
    */
   void purgeSystemEvents(ConnectionParameter cnxParameter, int days)
         throws ConnectionServiceEx, PurgeSystemEventsException;

   /**
    * Extrait un fichier d'archive Log de type Système ou Documents
    * 
    * @param cnxParameter
    *           : Paramétrées de connexion.
    * @param filePath
    *           : chemin de dépot des fichier de log.
    * @throws ConnectionServiceEx
    *            s'il y a un problème survient lors de la connexion
    * @throws ArchiveLogsRunningEx
    *            s'il y a un problème survient lors de l'archivage.
    */
   void extractSystemArchiveFile(ConnectionParameter cnxParameter,
         String filePath) throws ConnectionServiceEx, ArchiveLogsRunningEx;

}
