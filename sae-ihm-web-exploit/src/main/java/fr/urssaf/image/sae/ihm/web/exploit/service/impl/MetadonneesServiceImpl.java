package fr.urssaf.image.sae.ihm.web.exploit.service.impl;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;

import com.thoughtworks.xstream.XStream;
import com.thoughtworks.xstream.io.xml.StaxDriver;

import fr.urssaf.image.sae.ihm.web.exploit.modele.Metadonnee;
import fr.urssaf.image.sae.ihm.web.exploit.modele.Metadonnees;
import fr.urssaf.image.sae.ihm.web.exploit.service.MetadonneesService;

/**
 * Classe implémentant le service MetadonneesService
 * 
 * 
 */
public class MetadonneesServiceImpl implements MetadonneesService {

   @Override
   public final Metadonnees chargerMetadonnees(File fichier)
         throws FileNotFoundException {

         // Désérialisation des objets EcdeSource via Xstream
         StaxDriver staxDriver = new StaxDriver();
         XStream xstream = new XStream(staxDriver);

         xstream.alias("metadonnee", Metadonnee.class);
         xstream.alias("metadonnees", new Metadonnee[] {}.getClass());
         Metadonnees meta = new Metadonnees();
         meta.setMetadonnees((Metadonnee[]) xstream
               .fromXML(new FileInputStream(fichier)));

         return meta;

   }

}
