package fr.urssaf.image.sae.ihm.web.exploit.loader;

import java.io.File;
import java.io.FileNotFoundException;

import org.springframework.beans.factory.annotation.Autowired;

import fr.urssaf.image.sae.ihm.web.exploit.modele.ConfigurationsEnvironnement;
import fr.urssaf.image.sae.ihm.web.exploit.modele.ConfigurationsEnvironnementFrontal;
import fr.urssaf.image.sae.ihm.web.exploit.modele.Droits;
import fr.urssaf.image.sae.ihm.web.exploit.service.ConfigurationService;
import fr.urssaf.image.sae.ihm.web.exploit.service.DictionaryService;
import fr.urssaf.image.sae.ihm.web.exploit.service.DroitsService;
import fr.urssaf.image.sae.ihm.web.exploit.service.MetadonneesService;

/**
 * Classe permettant le chargement de classes specifiques
 * 
 * 
 */
public class ConfigLoader {

   /**
    * Service permettant de realiser le chargement des droits
    */
   private final DroitsService droitsService;

   /**
    * Service permettant de realiser le chargement des differentes
    * configurations
    */
   private final ConfigurationService configService;


   /**
    * Constructeur
    * 
    * @param droitsService
    *           Service permettant de realiser le chargement des droits
    * @param configService
    *           Service permettant de realiser le chargement des differentes
    *           configurations
    * @param metaService
    *           Service permettant de realiser le chargement des metadonnï¿½es
    *@param dicoService
    *           Service permettant de realiser le chargement des dictionnaires           
    */
   @Autowired
   public ConfigLoader(DroitsService droitsService,
         ConfigurationService configService, MetadonneesService metaService, DictionaryService dicoService) {
      this.droitsService = droitsService;
      this.configService = configService;
   }

   /**
    * Renvoie la liste de tous les droits
    * 
    * @param fichier
    *           Fichier contenant la liste des droits
    * 
    * @return Liste de toutes les configurations des droits
    * @throws FileNotFoundException
    *            Exception generee si le fichier n'existe pas
    */
   public final Droits creerDroits(File fichier) throws FileNotFoundException {
      return droitsService.charger(fichier);
   }

   /**
    * Renvoie la liste de toutes les configurations d'environnements (CASSANDRA
    * et services Web)
    * 
    * @param fichier
    *           Fichier contenant le liste des configurations frontaux
    * 
    * @return Liste de toutes les configurations environnement (CASSANDRA et
    *         services Web)
    * @throws FileNotFoundException
    *            Exception generee si le fichier n'existe pas
    */
   public final ConfigurationsEnvironnement creerConfiguration(File fichier)
         throws FileNotFoundException {
      return configService.chargerConfiguration(fichier);
   }
   
   /**
    * Revoie la liste de config des frontaux
    * @param fichier
    * @return
    * @throws FileNotFoundException
    */
   public final ConfigurationsEnvironnementFrontal creerConfigurationFrontaux(File fichier)
         throws FileNotFoundException {
      return configService.chargerConfigurationFrontaux(fichier);
   }

}
