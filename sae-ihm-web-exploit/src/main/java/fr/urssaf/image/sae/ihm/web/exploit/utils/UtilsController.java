package fr.urssaf.image.sae.ihm.web.exploit.utils;

import java.util.ArrayList;
import java.util.List;

import fr.urssaf.image.sae.ihm.web.exploit.modele.ConfigurationEnvironnement;
import fr.urssaf.image.sae.ihm.web.exploit.modele.ConfigurationEnvironnementFrontal;
import fr.urssaf.image.sae.ihm.web.exploit.modele.ConfigurationsEnvironnement;
import fr.urssaf.image.sae.ihm.web.exploit.modele.ConfigurationsEnvironnementFrontal;
import fr.urssaf.image.sae.ihm.web.exploit.modele.InstanceGeds;

public class UtilsController {

	/**
    * Retourne la liste des environnement frontaux en fonction du nom de
    * l'environnement GNT/GNS fournit en parametre
    * @param nomConfiguration
    * @return
    */
	public static List<String> getListFrontalByEnvName(ConfigurationsEnvironnement config, 
			ConfigurationsEnvironnementFrontal frontaux,String nomConfiguration) {
		
		// get config by name
	      ConfigurationEnvironnement configuration = config.getConfiguration(nomConfiguration);
		List<String> listNomFrontaux = new ArrayList<>();
		if (configuration != null) {
	    	  String idConf = configuration.getInstanceGed();
	    	  for(ConfigurationEnvironnementFrontal frl : frontaux.getConfigurationsFrontaux()) {
	    		  InstanceGeds identifiantPFGed = frl.getInstanceGeds();
				if(identifiantPFGed != null && identifiantPFGed.getListInstanceGed() != null) {
					for(String idConfFrontal : identifiantPFGed.getListInstanceGed()) {
						if(idConf.equals(idConfFrontal)) {
							listNomFrontaux.add(frl.getNom());
						}
					}
				}
	    	  }
	      }
		return listNomFrontaux;
	}
}
