package fr.urssaf.image.sae.ihm.web.exploit.decorateur;

import java.util.ArrayList;
import java.util.List;

import javax.servlet.http.HttpServletRequest;

import fr.urssaf.image.commons.maquette.definition.ILeftCol;
import fr.urssaf.image.commons.maquette.tool.InfoBoxItem;

/**
 * Classe gérant l'affichage des éléments contenus dans la colonne de gauche
 * 
 * 
 */
public class IhmColonneGauche implements ILeftCol {

   @Override
   public final List<InfoBoxItem> getInfoBox(HttpServletRequest arg0) {
      //return null;
      
      ArrayList<InfoBoxItem> infoBoxList = new ArrayList<InfoBoxItem>();
      
      InfoBoxItem otherInfo = new InfoBoxItem( "config", "Configuration", "Nom de la configuration choisie" ) ;
      otherInfo.addSpan( "nomConfig", "Configuration choisie", arg0.getSession().getAttribute("nomConfiguration").toString());
      infoBoxList.add( otherInfo ) ;
      
      return infoBoxList;
      
   }

   @Override
   public final String getLienDeconnexion(HttpServletRequest arg0) {
      // return "response.sendRedirect('deconnexion.do')";
      return "document.location.href='deconnexion.do'";
   }

   @Override
   public final String getNomApplication(HttpServletRequest arg0) {
      return "SAE - IHM Web Exploit";
   }

   @Override
   public final String getNomUtilisateur(HttpServletRequest arg0) {
      // Récupération du nom de l'utilisateur en session (nameId)
      if (arg0.getSession().getAttribute("nameId") != null) {
         return arg0.getSession().getAttribute("nameId").toString();
      }
      return "";
   }

   @Override
   public final String getRoleUtilisateur(HttpServletRequest arg0) {
      // Récupération du rôle Anaïs en session (habAnais)
      if (arg0.getSession().getAttribute("habAnais") != null) {
         return arg0.getSession().getAttribute("habAnais").toString();
      }
      return "";

   }

   @Override
   public final String getVersionApplication(HttpServletRequest arg0) {
      // Récupération du numéro de version en session (version)
      if (arg0.getSession().getAttribute("version") != null) {
         return arg0.getSession().getAttribute("version").toString();
      }
      return "";
   }
   

}
