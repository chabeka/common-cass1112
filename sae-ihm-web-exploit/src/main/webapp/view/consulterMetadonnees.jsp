<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib uri="http://displaytag.sf.net" prefix="display"%>
<%@taglib prefix="custom" uri="/WEB-INF/tld/map.tld"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>IHM Web Exploit - Consultation des Métadonnées</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="css/displaytag.css" rel="stylesheet" type="text/css" />
<link href="css/formulaire.css" rel="stylesheet" type="text/css" />
<link href="css/calendrier.css" rel="stylesheet" media="screen"
	type="text/css" title="Design" />

<script type="text/javascript" src="js/calendrier.js"></script>
<script type="text/javascript">
   function activateModifiableMeta(){
      document.getElementById('codeCourt').disabled=false;
      document.getElementById('codeLong').disabled=false;
      document.getElementById('description').disabled=false;
      document.getElementById('label').disabled=false;
      document.getElementById('type').disabled=false;
      document.getElementById('requiredForArchival').disabled=false;
      document.getElementById('requiredForStorage').disabled=false;
      document.getElementById('length').disabled=false;
      document.getElementById('pattern').disabled=false;
      document.getElementById('consultable').disabled=false;
      document.getElementById('defaultConsultable').disabled=false;
      document.getElementById('isIndexed').disabled=false;
      document.getElementById('hasDictionary').disabled=false;
      document.getElementById('dictionaryName').disabled=false;
      document.getElementById('searchable').disabled=false;
      document.getElementById('modifiable').disabled=false;
      document.getElementById('internal').disabled=false;
      document.getElementById('archivable').disabled=false;               
      }

   function checkModifiedData(){

      if(document.getElementById('codeCourt').value == null){
         };

         if(document.getElementById('codeLong').value == null){
   			document.getElementById("erreur").innerHTML = "Le code long est une valeur obligatoire";	
   			return false;
            };
         if(document.getElementById('description').value == null){
   			document.getElementById("erreur").innerHTML = "La description est une valeur obligatoire";	
   			return false;
            };
         if(document.getElementById('label').value == null){
   			document.getElementById("erreur").innerHTML = "Le libellé est une valeur obligatoire";	
   			return false;
            };
         if(document.getElementById('type').value == null){
   			document.getElementById("erreur").innerHTML = "Le type de la métadonnées est une valeur obligatoire";	
   			return false;
            };
         if(document.getElementById('length').value == null){
   			document.getElementById("erreur").innerHTML = "Le taille de la métadonnées est une valeur obligatoire, s'il n'existement pas de limite renseigner -1";	
   			return false;
            };
         if(document.getElementById('hasDictionary').value == 'true' && document.getElementById('dictionaryName').value == 'null'){
   			document.getElementById("erreur").innerHTML = "Si la métadonnée a un dictionnaire le nom de ce dernier est obligatoire";	
   			return false;
            };
      }
</script>



</head>

<body>


<table class="ds_box" cellpadding="0" cellspacing="0" id="ds_conclass"
	style="display: none;">
	<tr>
		<td id="ds_calclass"></td>
	</tr>
</table>

<form:form method="post" modelAttribute="metaForm"
	action="lancerConsultMeta.do">

	<h6 class="msg_erreur" id="erreur"><form:errors path='*' /></h6>

	<c:if test="${detailTrace == null}">

		<div class="cadreForm">

		<p>Sélectionner le mode de recherche :</p>

		<form:radiobutton id="modeToutes" path="modeRecherche"
			value="modeToutes" /><label> Afficher toutes les métadonnées
		: </label>
		<p class="double"></p>
		<form:radiobutton id="modeCodeLong" path="modeRecherche"
			value="modeCodeLong" /> <label>Par code long de la
		métadonnée : </label> <form:input id="codeLong" cssClass="inputText"
			path="codeLong" />

		<p class="double"></p>


		<div style="padding-top: 5px">Nombre de lignes dans le tableau
		résultat : <form:input cssClass="inputNum" size="3"
			id="nbLignesTableau" path="nbLignesTableau" /></div>

		<p style="text-align: right"><input type="submit"
			value="Consulter" /></p>
		</div>

		<div></div>
	</c:if>
</form:form>

<c:if test="${not empty listeMeta}">

	<display:table name="listeMeta" id="metaRow" style="width: 90%"
		defaultorder="ascending" pagesize="${nbLignesTableau}" requestURI="/lancerConsultMeta.do">
		<display:column property="longCode" title="Code long" sortable="true"></display:column>
		<display:column property="shortCode" title="Code court"
			sortable="true" />
		<display:column property="label" title="Libéllé" sortable="true" />
		<display:column property="description" title="Description"/>
		<display:column property="type" title="Type"></display:column>
		<display:column title="Détails">
			<a href="detailMeta.do?codeLong=${metaRow.longCode}"
				title="Voir le détail">Détail</a>
		</display:column>
	</display:table>
</c:if>




</body>
</html>

