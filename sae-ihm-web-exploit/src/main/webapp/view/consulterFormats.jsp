<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib uri="http://displaytag.sf.net" prefix="display"%>
<%@ taglib prefix="custom" uri="/WEB-INF/tld/map.tld"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<title>IHM Web Exploit - Consultation des formats</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<link href="css/displaytag.css" rel="stylesheet" type="text/css" />
<link href="css/formulaire.css" rel="stylesheet" type="text/css" />

<script>
	function confirmerSuppression(idFormat) {
	   	document.getElementById("action").value = "supprimer"; 
	   	document.getElementById("identifiantATraiter").value = idFormat;
		return confirm("Confirmer la suppression du format : " + idFormat + " ?");
	}
</script>


</head>

<body>


<table class="ds_box" cellpadding="0" cellspacing="0" id="ds_conclass" style="display: none;">
   <tr>
      <td id="ds_calclass"></td>
   </tr>
</table>

<form:form method="post" modelAttribute="formatListeForm" action="consulterFormats.do">
	
	<h6 class="msg_erreur" id="erreur"><form:errors path='*' /></h6>
	
	<c:if test="${stacktrace !=null}">
		<p><textarea class="stacktrace" rows="15" cols="180"><c:out value="${stacktrace}"/></textarea></p>
	</c:if>
	
	<input type="hidden" name="action" id="action" />
	<input type="hidden" name="identifiantATraiter" id="identifiantATraiter" />
	
    <div class="cadreForm">

      <div style="padding-top: 5px">
         Nombre de lignes dans le tableau résultat :
         <form:input cssClass="inputNum" size="3" id="nbLignesTableau" path="nbLignesTableau" />
         <br /><br />
      </div>

      <div><input type="submit" value="Rafraîchir" /></div>

	</div>
   


<div><br /></div>

<c:if test="${not empty listeFormats}">

  
   <display:table
      name="listeFormats"
      id="formatRow"
      style="width: 90%"
      defaultorder="ascending"
      pagesize="${nbLignesTableau}"
      requestURI="/consulterFormats.do">
      
      <display:column property="idFormat" title="Identifiant" sortable="true" />
      <display:column property="typeMime" title="Type Mime" sortable="true" />
      <display:column property="extension" title="Extension" sortable="true" />
      <display:column property="description" title="Description" />
      <c:if test="${formatRow.visualisable == true}">
      	<display:column title="Visualisable" sortable="true">Oui</display:column>
      </c:if>
      <c:if test="${formatRow.visualisable == false}">
      	<display:column title="Visualisable" sortable="true">Non</display:column>
      </c:if>
      <display:column property="validator" title="Validateur" sortable="true"></display:column>
      <display:column property="identificateur" title="Identificateur" sortable="true"></display:column>
      
      <display:column>
         <a href="modifierFormat.do?idFormat=${formatRow.idFormat}" title="Modifier">
         <img src="img/page_edit.png" alt="Modifier" />
         </a>
         
         </display:column>
      
      
      
      <display:column>
      <input title="Supprimer le format" src="img/recycle_bin.png"
							type="image" value="Supprimer"
							onclick="return confirmerSuppression('${formatRow.idFormat}')" />
	</display:column>
      
   </display:table>
   
   <div></div>
   
</c:if>

</form:form>

</body>
</html>
