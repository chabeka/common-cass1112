<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<%@page import="java.util.ArrayList"%>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>IHM Web Exploit - Consultation de document</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

</head>

<body>

<form:form method="post" modelAttribute="consultationForm">

	<h6 class="erreur"><form:errors path='*' /></h6>

	<p>Identifiant du document <form:input path="identifiant" size="50" /></p>

	<p>Merci de sélectionner les métadonnées à afficher en retour :</p>

	<div style="overflow: scroll; height: 180px">
	<table class="tableau" width="100%" border="0" cellpadding="2"
		cellspacing="2">

		<tr>
			<th></th>
			<th>Code</th>
			<th>Libelle</th>
		</tr>

		<c:forEach items="${listeMetaAffichage}" var="metaAff">
			<tr>
				<td><form:checkbox path="codeMeta" value="${metaAff.code}" /></td>
				<td><c:out value="${metaAff.code}" /></td>
				<td><c:out value="${metaAff.libelle}" /></td>
			</tr>
		</c:forEach>
	</table>
	</div>
	<p><input type="submit" value="Valider" /></p>

	<c:if test="${resRecherche != null}">
		<p>Document : ${id}</p>
		<p><a href="telecharger.do?idConsult=<c:out value="${consultationForm.identifiant}"/>">Consulter le document</a></p>
		<c:forEach items="${resRecherche.metadonnees}" var="meta">
			<li><c:out value="${meta.code}"/> : <c:out value="${meta.valeur}" /></li>
		</c:forEach>
	</c:if>
	

</form:form>

</body>
</html>


