<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<%@page import="java.util.ArrayList"%>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>IHM Web Exploit - Recherche de documents</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

</head>

<body>

<!-- Liste des codes des métadonnées de recherche -->


<form:form method="post" modelAttribute="rechercheForm">

	<h6 class="erreur"><form:errors path='*' /></h6>
	<p>Veuillez saisir la requête lucène en utilisant les critères de
	recherche ci-dessous :</p>
	<p><form:textarea path="requeteLucene" cols="105" rows="3"
		title="Requête Lucène" /></p>


	<div id="codeRecherche" style="overflow: scroll; height: 180px">
	<table class="tableau" width="100%" border="0" cellpadding="2"
		cellspacing="2">

		<tr>
			<th>Code</th>
			<th>Libelle</th>
			<th>Indexée</th>
		</tr>
		<c:forEach items="${listeMetaRecherche}" var="metaRech">
			<tr>
				<td><c:out value="${metaRech.code}" /></td>
				<td><c:out value="${metaRech.libelle}" /></td>
				<td><c:out value="${metaRech.indexee}" /></td>
			</tr>
		</c:forEach>
	</table>
	</div>

	<p>Merci de sélectionner les métadonnées à afficher en retour :</p>

	<div style="overflow: scroll; height: 180px">
	<table class="tableau" width="100%" border="0" cellpadding="2"
		cellspacing="2">

		<tr>
			<th></th>
			<th>Code</th>
			<th>Libelle</th>
		</tr>

		<c:forEach items="${listeMetaAffichage}" var="metaAff">
			<tr>
				<td><form:checkbox path="codeMeta" value="${metaAff.code}" /></td>
				<td><c:out value="${metaAff.code}" /></td>
				<td><c:out value="${metaAff.libelle}" /></td>
			</tr>
		</c:forEach>
	</table>
	</div>
	<p><input type="submit" value="Valider" /></p>

	<c:if test="${resRecherche != null}">
		<div style="overflow: scroll; height: 500px">
		<table width="90%" border="1" cellpadding="2" cellspacing="2">
			<tr>
				<th>Identitifiant</th>
				<c:forEach items="${entete}" var="nomColonne">
					<th><c:out value="${nomColonne}" /></th>
				</c:forEach>
			</tr>
			<tr>
				<c:forEach items="${resRecherche.donnees}" var="donnee">
					<tr>
						<td><c:out value="${donnee.uuid}" /></td>
						<c:forEach items="${donnee.metadonnees}" var="meta">
							<td><c:out value="${meta.valeur}" /></td>
						</c:forEach>
					</tr>
				</c:forEach>
			</tr>
		</table>
		</div>
	</c:if>
</form:form>

</body>
</html>


