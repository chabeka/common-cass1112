<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:jee="http://www.springframework.org/schema/jee" xmlns:aop="http://www.springframework.org/schema/aop"
   xsi:schemaLocation="
      http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/context 
      http://www.springframework.org/schema/context/spring-context-3.0.xsd
      http://www.springframework.org/schema/jee 
      http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
      http://www.springframework.org/schema/aop
      http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">
   
   <aop:config>
<!--  <aop:pointcut id="exceptionConnexionDfcePointcut"
         expression="execution(public * fr.urssaf.image.sae.storage.dfce.support.*ServiceSupport.*(..))" /> -->
     <aop:pointcut id="setConnexionManagerDfcePointcut" expression="execution(public * fr.urssaf.image.sae.storage.dfce.services.impl.storagedocument.Storage*ServiceImpl.*(..)))" />
     <aop:pointcut id="errorConnexionDfcePointcut"
         expression="execution(public * fr.urssaf.image.sae.storage.dfce.services.impl.storagedocument.crud.*ServiceImpl.*(..)) || execution(public * fr.urssaf.image.sae.storage.dfce.support.*Support.*(..))" />
                
      <aop:aspect id="gestionConnexionDFCEAspect" ref="gestionConnexionDFCEAspect">
         <aop:around method="gererConnexionDFCE" pointcut-ref="errorConnexionDfcePointcut" />
      </aop:aspect>
      
      <aop:aspect id="findConnexionManagerDFCEAspect" ref="gestionConnexionDFCEAspect">
         <aop:before method="setConnexionManagerDFCE" pointcut-ref="setConnexionManagerDfcePointcut" />
      </aop:aspect>
   </aop:config>
   
</beans>
