<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="
      http://www.springframework.org/schema/beans 
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/context 
      http://www.springframework.org/schema/context/spring-context-3.0.xsd">


   <!-- Pour la crÃ©ation d'un MBeanServer
        dans le cas de serveur qui n'ont aurait pas
        ici : tomcat dispose de son propre MBeanServer -->
   <bean id="mbeanServer" class="org.springframework.jmx.support.MBeanServerFactoryBean">
      <property name="locateExistingServerIfPossible" value="true"/>
   </bean>
        
   <!-- <context:component-scan base-package="fr.urssaf.image.commons.spring.exemple" />--> 

   <bean id="registry"
         class="org.springframework.remoting.rmi.RmiRegistryFactoryBean">
      <property name="port" value="9998" />      
   </bean>
   
   <bean id="serverConnector"
         class="org.springframework.jmx.support.ConnectorServerFactoryBean">
         
         <property name="objectName" value="connector:name=rmi" />
         <property name="serviceUrl" 
                   value="service:jmx:rmi:///jndi/rmi://:9998/server" />
         <property name="environment">
            <map>
               <entry key="jmx.remote.x.password.file" value="jmx.password" /> 
               <entry key="jmx.remote.x.access.file" value="jmx.access" />
            </map>
         </property>
   
   </bean>

   <bean id="exporter"
         class="org.springframework.jmx.export.MBeanExporter"
         lazy-init="false" >
      <property name="beans">
         <map>
            <entry key="bean:name=premierBean" value-ref="premierBean1" />
         </map>
      </property>
      <property name="server" ref="mbeanServer"/>
   </bean>
 
   <bean id="premierBean1" class="fr.urssaf.image.commons.spring.exemple.mbean.PremierBean">
      <property name="helloWord" value="Hello test" />
      <property name="valeur" value="150" />
   </bean>
   
   
</beans>