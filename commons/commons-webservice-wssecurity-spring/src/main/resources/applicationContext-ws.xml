<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:cxf="http://cxf.apache.org/core" xmlns:jaxws="http://cxf.apache.org/jaxws"
	xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/"
	xsi:schemaLocation="
http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/context 
http://www.springframework.org/schema/context/spring-context-2.5.xsd
http://cxf.apache.org/core
http://cxf.apache.org/schemas/core.xsd
http://cxf.apache.org/jaxws
http://cxf.apache.org/schemas/jaxws.xsd">

	<context:component-scan
		base-package="fr.urssaf.image.commons.webservice.wssecurity.spring" />

	<import resource="classpath:META-INF/cxf/cxf.xml" />
	<import resource="classpath:META-INF/cxf/cxf-servlet.xml" />
	<import resource="classpath*:META-INF/cxf/cxf-extension-*.xml" />

	<bean id="myPasswordCallback" class="fr.urssaf.image.commons.webservice.wssecurity.spring.service.ServerPasswordCallback" />


	<jaxws:endpoint id="docEndPointDocument" implementor="#documentServiceImpl"
		address="/DocumentService">


		<jaxws:inInterceptors>
			<!--
				SAAJ Interceptor needs to be explicitly declared only in CXF 2.0.x
			-->
			<bean class="org.apache.cxf.binding.soap.saaj.SAAJInInterceptor" />
			<bean class="org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor">
				<constructor-arg>
					<map>
						<entry key="action" value="UsernameToken Signature" />
						<!-- entry key="passwordType" value="PasswordDigest" /-->
						<entry key="signaturePropFile" value="serviceKeyStore.properties" />
						<entry key="passwordCallbackRef">
							<ref bean="myPasswordCallback" />
						</entry>
					</map>
				</constructor-arg>
			</bean>
		</jaxws:inInterceptors>



	</jaxws:endpoint>

</beans>