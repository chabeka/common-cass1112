<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/batch"
   xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
         http://www.springframework.org/schema/beans
         http://www.springframework.org/schema/beans/spring-beans.xsd
         http://www.springframework.org/schema/batch
         http://www.springframework.org/schema/batch/spring-batch-2.1.xsd">


   <job id="job3">

      <step id="stepA" next="stepB">
         <tasklet ref="logTaskA" />
      </step>

      <step id="stepB">
         <tasklet ref="logTaskB" />
         <next on="*" to="stepC" />
         <next on="FAILED" to="stepD" />
      </step>

      <step id="stepC">
         <tasklet ref="logTaskC" />
      </step>

      <step id="stepD">
         <tasklet ref="logTaskD" />
         <next on="*" to="decision" />
      </step>

      <decision id="decision" decider="decider">
         <next on="oui" to="stepE" />
         <next on="non" to="stepF" />
      </decision>

      <step id="stepE">
         <tasklet ref="logTaskE" />
      </step>

      <step id="stepF">
         <tasklet ref="logTaskF" />
      </step>

   </job>

   <beans:bean id="logTaskA" parent="logTask">
      <beans:property name="message" value="étape A" />
   </beans:bean>

   <beans:bean id="logTaskB" parent="logTask">
      <beans:property name="exception" value="échec de l'étape B" />
   </beans:bean>

   <beans:bean id="logTaskC" parent="logTask">
      <beans:property name="message" value="étape C" />
   </beans:bean>

   <beans:bean id="logTaskD" parent="logTask">
      <beans:property name="message" value="étape D" />
   </beans:bean>

   <beans:bean id="logTaskE" parent="logTask">
      <beans:property name="message" value="étape E" />
   </beans:bean>

   <beans:bean id="logTaskF" parent="logTask">
      <beans:property name="message" value="étape F" />
   </beans:bean>

   <beans:bean id="decider" parent="exempleDecider">
      <beans:property name="decision" value="non" />
   </beans:bean>

</beans:beans>
