<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/batch"
   xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
         http://www.springframework.org/schema/beans
         http://www.springframework.org/schema/beans/spring-beans.xsd
         http://www.springframework.org/schema/batch
         http://www.springframework.org/schema/batch/spring-batch-2.1.xsd">


   <job id="job5">

      <split id="flow" next="stepE" task-executor="taskExecutor">

         <flow>
            <step id="stepA" next="stepB">
               <tasklet ref="pauseTaskA" />
            </step>
             <step id="stepB">
               <tasklet ref="pauseTaskB" />
            </step>
         </flow>

         <flow>
            <step id="stepC">
               <tasklet ref="pauseTaskC" />
            </step>
         </flow>
         
          <flow>
            <step id="stepD">
               <tasklet ref="pauseTaskD" />
            </step>
         </flow>

      </split>

      <step id="stepE">
         <tasklet ref="pauseTaskE" />
      </step>

   </job>

   <beans:bean id="taskExecutor"
      class="org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor">
      <beans:property name="corePoolSize" value="3" />
   </beans:bean>

   <beans:bean id="pauseTaskA" parent="pauseTask">
      <beans:property name="pause" value="5000" />
   </beans:bean>

   <beans:bean id="pauseTaskB" parent="pauseTask">
      <beans:property name="pause" value="3000" />
   </beans:bean>

   <beans:bean id="pauseTaskC" parent="pauseTask">
      <beans:property name="pause" value="10000" />
   </beans:bean>
   
   <beans:bean id="pauseTaskD" parent="pauseTask">
      <beans:property name="pause" value="1000" />
   </beans:bean>
   
   <beans:bean id="pauseTaskE" parent="pauseTask">
      <beans:property name="pause" value="1000" />
   </beans:bean>

</beans:beans>
