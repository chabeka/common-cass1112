package fr.urssaf.image.sae.admin.dfce.exploit.services;

import java.io.File;

import fr.urssaf.image.commons.dfce.model.DFCEConnection;
import fr.urssaf.image.sae.admin.dfce.exploit.exception.BaseAdministrationServiceEx;
import fr.urssaf.image.sae.admin.dfce.exploit.exception.ConnectionServiceEx;

/**
 * Fournit l'interface des services :
 * <ul>
 * <li>Service de mise à jour des indexes.</li>
 * <li>Service de création de la base SAE et des catégories(Life cycle).</li>
 * </ul>
 * 
 * 
 */
public interface AdministrationDFCEService {

   /**
    * Service de mise à jour des indexes de la base.
    * 
    * @param cnxParameter
    *           : Paramétrées de connexion.
    * @throws ConnectionServiceEx
    *            s'il y a un problème survient lors de la connexion
    */
   void updateIndexes(DFCEConnection cnxParameter) throws ConnectionServiceEx;

   /**
    * Service de création de la base.
    * 
    * @param xmlDataBaseModel
    *           : structure de la base de donnée
    * 
    * @param xmlDocumentsType
    *           : structure des types de documents
    * @param cnxParameter
    *           : Paramétrées de connexion.
    * @return le nom de la base.
    * @throws BaseAdministrationServiceEx
    *            s'il y'a une problème lors de l'appel d'un service
    * @throws ConnectionServiceEx
    *            s'il y a un problème survient lors de la connexion
    */
   String createSAEBase(final DFCEConnection cnxParameter,
         final File xmlDataBaseModel, final File xmlDocumentsType)
         throws BaseAdministrationServiceEx, ConnectionServiceEx;

   /**
    * Service de mise à jour des liveCycleRules
    * 
    * @param cnxParameter
    *           paramètres de connexion
    * @param xmlDocumentsType
    *           fichier contenant les données de durée de conservation
    * @throws BaseAdministrationServiceEx
    *            exception levée lors de l'insertion en base
    * @throws ConnectionServiceEx
    *            exception de connexion
    */
   void updateLifeCycleRules(final DFCEConnection cnxParameter,
         final File xmlDocumentsType) throws BaseAdministrationServiceEx,
         ConnectionServiceEx;

   /**
    * Réindexation de tous les documents dans le cadre de l'indexation des
    * métadonnées.
    * 
    * @param cnxParameter
    *           Parametre de connexion
    * @param categories
    *           Liste des métadonnées à indexer sous la forme xxx/yyy/zzz
    * @throws ConnectionServiceEx
    *            exception de connexion
    */
   void reindexCategories(final DFCEConnection cnxParameter, String categories)
         throws ConnectionServiceEx;
}
