<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>SAE - Registre d'exploitation</title>
<c:import url="/view/header.jsp" />
</head>
<body>

<p>SAE - Registre d'exploitation</p>

<div id="logs-grid"></div>

<script type="text/javascript">
   Ext
         .onReady(function() {

            var store = new Ext.data.JsonStore(
                  {
                     root : 'logs',
                     remoteSort : true,
                     fields : [ 'idseq', 'horodatage', 'occurences',
                           'probleme', 'action', 'infos' ],
                     url : 'http://localhost:8080/sae-webdemo/registre_exploitation/search.html'

                  });
            store.setDefaultSort('idseq', 'desc');

            var grid = new Ext.grid.GridPanel( {
               width : 750,
               height : 500,
               title : 'Liste des traces',
               store : store,
               trackMouseOver : false,
               disableSelection : true,
               loadMask : true,

               columns : [ {
                  header : "N&deg;",
                  dataIndex : 'idseq',
                  sortable : true
               }, {
                  header : "Date",
                  width : 120,
                  dataIndex : 'horodatage',
                  sortable : true
               }, {
                  header : "Nombre",
                  dataIndex : 'occurences'

               }, {
                  header : "Message",
                  dataIndex : 'probleme'

               }, {
                  header : "Code",
                  dataIndex : 'action'

               }, {
                  header : "Infos",
                  dataIndex : 'infos'

               }

               ],

               // paging bar on the bottom
               bbar : new Ext.PagingToolbar( {
                  pageSize : 25,
                  store : store,
                  displayInfo : true,
                  displayMsg : 'Displaying topics {0} - {1} of {2}',
                  emptyMsg : "No topics to display"

               })
            });

            // render it
            grid.render('logs-grid');

            // trigger the data store load
            store.load( {
               params : {
                  start : 0,
                  limit : 25
               }
            });
         });
</script>

</body>

</html>