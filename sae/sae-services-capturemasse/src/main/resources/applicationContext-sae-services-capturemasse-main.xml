<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="
		http://www.springframework.org/schema/beans	
		http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

   <!--
   Sous-ensemble du fichier principal de l'artéfact.
   
   Il peut être importé tel quel dans les TU. 
   -->

   <!-- Configuration du délai d'attente pour les tentatives d'écriture sur l'ECDE -->
   <bean
      class="fr.urssaf.image.sae.services.batch.capturemasse.listener.EcdeConnexionConfiguration">
      <property name="delaiAttenteMs" value="${sae.dfce.delai.attente}" />
      <property name="nbreEssaiMax" value="${sae.dfce.nombre.essai}" />
   </bean>
   
   
   <!-- Configuration du pool d'insertion des documents dans DFCE -->
   <bean id="insertionPoolConfiguration"
      class="fr.urssaf.image.sae.services.batch.capturemasse.support.stockage.multithreading.InsertionPoolConfiguration">
      <property name="corePoolSize" value="${sae.archivagemasse.pool.size}" />
   </bean>
   
   
   <!-- Configuration de l'interruption du traitement -->
   <bean id="captureMasseConfig"
      class="fr.urssaf.image.sae.services.batch.capturemasse.support.stockage.interruption.model.InterruptionTraitementConfig">
      <qualifier value="interruption_capture_masse" />
      <property name="start" value="${sae.archivagemasse.interruption.heure}" />
      <property name="delay" value="${sae.archivagemasse.interruption.delai}" />
      <property name="tentatives"
         value="${sae.archivagemasse.interruption.tentatives}" />
   </bean>

   <!-- Component-scan -->
   <context:component-scan base-package="fr.urssaf.image.sae.services.batch" />
   
   <!-- Import du fichier des fichiers de contexte des autres artéfacts -->
   <import resource="applicationContext-sae-services.xml" />
   <import resource="applicationContext-sae-pile-travaux.xml" />
   
   <!-- Import du fichier de définition du job de capture de masse -->
   <import resource="applicationContext-sae-services-capturemasse-item.xml" />
   <import resource="jobs/job-sae-capture-masse-binaire.xml" />   
   
</beans>
